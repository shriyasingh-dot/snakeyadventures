/*
  * * * --- Global Styles ---
  * * */
 :root {
   --pink-light: #ffc0cb; /* Lightest pink */
   --pink-medium-light: #f8bbd0;
   --pink-medium: #f48fb1;
   --pink-medium-dark: #f06292;
   --pink-dark: #e91e63; /* Main pink */
   --pink-darker: #c2185b;
   --pink-accent: #ff4081;
   --text-color: #fde0dc; /* Light pink text for contrast */
   --background-color: #1c1417; /* Darker pink/red background */
   --grid-line-color: #4a3138;
   --shadow-color: rgba(0, 0, 0, 0.4);
   --pixel-border: 4px solid;
   --pixel-border-color: var(--pink-medium-dark);
   --pixel-font: 'Press Start 2P', cursive;
 }
 
 *, *::before, *::after {
   box-sizing: border-box;
 }
 
 html, body {
   margin: 0;
   padding: 0;
   font-family: Arial, sans-serif;
   background-color: var(--background-color);
   color: var(--text-color);
   display: flex;
   justify-content: center;
   align-items: center;
   min-height: 100vh;
   text-align: center;
   overflow: hidden;
 }
 
 body {
   background-image: radial-gradient(circle, #382229, #000); /* Darker radial gradient */
 }
 
 h1, h2, h3, h4, h5, h6 {
   font-family: var(--pixel-font);
   color: var(--pink-light);
   text-transform: uppercase;
   text-shadow: 2px 2px var(--shadow-color);
 }
 
 p, ul, ol, li {
   font-family: var(--pixel-font);
   margin: 0;
   padding: 0;
   line-height: 1.5;
 }
 
 button {
   font-family: var(--pixel-font);
   cursor: pointer;
   border: none;
 }
 
 /*
  * * * --- General Layout & Overlays ---
  * * */
 #game-container {
   display: flex;
   flex-direction: column;
   gap: 1.5rem;
   padding: 2rem;
   background-color: #2a1e23; /* Darker pink background */
   border-radius: 12px;
   box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
   position: relative;
   max-width: 90%;
   width: 500px;
 }
 
 .game-header {
   display: flex;
   justify-content: space-between;
   align-items: center;
   margin-bottom: 1rem;
 }
 
 .game-header h1 {
   font-size: 2.2rem;
   letter-spacing: 2px;
   margin: 0;
   color: var(--pink-accent);
   text-shadow: 4px 4px var(--pink-darker);
 }
 
 .info-btn {
   background: none;
   border: none;
   font-size: 2rem;
   padding: 0;
   color: var(--pink-medium-light);
   transition: transform 0.2s ease, color 0.2s ease;
 }
 
 .info-btn:hover {
   transform: scale(1.1);
   color: var(--pink-light);
 }
 
 /* Overlays */
 .instructions-overlay,
 .game-over-overlay,
 .pause-overlay {
   position: fixed;
   top: 0;
   left: 0;
   width: 100%;
   height: 100%;
   background-color: rgba(28, 20, 23, 0.8); /* Dark pink overlay */
   display: flex;
   justify-content: center;
   align-items: center;
   z-index: 100;
   opacity: 0;
   visibility: hidden;
   transition: opacity 0.3s ease, visibility 0.3s ease;
 }
 
 .instructions-overlay.visible,
 .game-over-overlay.visible,
 .pause-overlay.visible {
   opacity: 1;
   visibility: visible;
 }
 
 .instructions-modal,
 .game-over-modal,
 .pause-modal {
   background-color: #382229; /* Darker pink modal background */
   padding: 2.5rem;
   border-radius: 15px;
   border: var(--pixel-border) var(--text-color);
   box-shadow: 0 8px 16px rgba(0, 0, 0, 0.7);
   max-width: 500px;
   width: 90%;
   text-align: center;
   transform: scale(0.9);
   transition: transform 0.3s ease;
 }
 
 .instructions-overlay.visible .instructions-modal,
 .game-over-overlay.visible .game-over-modal,
 .pause-overlay.visible .pause-modal {
   transform: scale(1);
 }
 
 /*
  * * * --- Score Display & Canvas ---
  * * */
 .score-container {
   display: flex;
   justify-content: center;
   align-items: center;
   gap: 1.5rem;
   margin-bottom: 1rem;
   background-color: #382229; /* Darker pink score background */
   padding: 0.75rem 1.5rem;
   border-radius: 8px;
   border: 2px solid var(--text-color);
 }
 
 .score-item {
   display: flex;
   flex-direction: column;
   min-width: 80px;
 }
 
 .score-label,
 .stat-label {
   font-size: 0.8rem;
   color: var(--pink-medium-light);
   text-transform: uppercase;
 }
 
 .score-value,
 .stat-value {
   font-family: var(--pixel-font);
   font-size: 1.5rem;
   color: var(--pink-accent);
   text-shadow: 2px 2px var(--pink-darker);
 }
 
 .score-divider {
   color: var(--pink-light);
   font-size: 1.5rem;
   opacity: 0.5;
 }
 
 .canvas-container {
   position: relative;
   width: 400px;
   height: 400px;
   margin: 0 auto;
   border: 6px solid var(--pink-medium-dark);
   background-color: #000;
   box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.8);
 }
 
 #gameCanvas {
   background-color: transparent;
   display: block;
 }
 
 .canvas-overlay {
   position: absolute;
   top: 0;
   left: 0;
   width: 100%;
   height: 100%;
   background-color: rgba(28, 20, 23, 0.7); /* Dark pink overlay */
   display: flex;
   justify-content: center;
   align-items: center;
   z-index: 5;
   opacity: 1;
   transition: opacity 0.3s ease;
 }
 
 .canvas-overlay.hidden {
   opacity: 0;
   pointer-events: none;
 }
 
 .ready-message h2,
 .ready-message p {
   color: var(--pink-light);
 }
 
 .ready-message h2 {
   font-size: 1.8rem;
   margin-bottom: 0.5rem;
   color: var(--pink-accent);
 }
 
 .ready-message p {
   font-size: 0.9rem;
 }
 
 /*
  * * * --- Instructions Modal ---
  * * */
 .instructions-modal h2 {
   margin-top: 0;
   font-size: 2rem;
   color: var(--pink-accent);
 }
 
 .instruction-grid {
   display: grid;
   grid-template-columns: 1fr;
   gap: 2rem;
   margin-top: 1.5rem;
 }
 
 @media (min-width: 480px) {
   .instruction-grid {
     grid-template-columns: 1fr 1fr;
   }
 }
 
 .control-section,
 .rules-section {
   text-align: left;
 }
 
 .control-section h3,
 .rules-section h3 {
   font-size: 1.2rem;
   margin-bottom: 1rem;
   color: var(--pink-medium-light);
 }
 
 .control-item {
   display: flex;
   align-items: center;
   gap: 1rem;
   margin-bottom: 0.75rem;
 }
 
 .key {
   background-color: #5e3540; /* Darker pink key background */
   color: var(--text-color);
   padding: 0.5rem 0.75rem;
   border-radius: 6px;
   font-family: monospace;
   font-size: 0.9rem;
   border: 2px solid #885361;
   box-shadow: inset 0 -3px 0 #331c24;
 }
 
 .rules-section ul {
   list-style-type: none;
   text-align: left;
   padding-left: 0;
 }
 
 .rules-section li {
   margin-bottom: 0.75rem;
   font-size: 0.9rem;
   color: var(--pink-light);
   display: flex;
   align-items: center;
   gap: 0.75rem;
 }
 
 .rules-section li::before {
   content: 'ðŸ’–';
   font-size: 1.2rem;
   color: var(--pink-accent);
 }
 
 /*
  * * * --- Game Over Modal ---
  * * */
 .game-over-title {
   color: var(--pink-darker);
   font-size: 2.5rem;
   margin-top: 0;
 }
 
 .game-stats {
   display: flex;
   flex-direction: column;
   gap: 1rem;
   margin-bottom: 2rem;
   background-color: #2a1e23; /* Darker pink stats background */
   padding: 1.5rem;
   border-radius: 8px;
   border: 2px solid var(--text-color);
 }
 
 .stat-item {
   display: flex;
   justify-content: space-between;
   align-items: center;
 }
 
 .stat-label {
   font-size: 1rem;
   text-align: left;
   color: var(--pink-medium-light);
 }
 
 .stat-value {
   font-size: 1.8rem;
   text-align: right;
   color: var(--pink-accent);
 }
 
 .modal-buttons {
   display: flex;
   flex-direction: column;
   gap: 1rem;
 }
 
 /*
  * * * --- Pause Modal ---
  * * */
 .pause-modal h2 {
   font-size: 2.5rem;
   color: var(--pink-medium);
   margin-top: 0;
 }
 
 .pause-modal p {
   font-size: 1rem;
   margin-bottom: 2rem;
   color: var(--pink-light);
 }
 
 /*
  * * * --- Buttons & Controls ---
  * * */
 .pixel-btn {
   font-family: var(--pixel-font);
   font-size: 1rem;
   padding: 1rem 1.5rem;
   border-radius: 8px;
   color: #fff;
   border: 4px solid var(--pink-darker);
   text-shadow: 2px 2px rgba(0, 0, 0, 0.4);
   box-shadow: inset 0 -6px 0 var(--pink-darker);
   transition: transform 0.1s, box-shadow 0.1s;
 }
 
 .pixel-btn:active {
   transform: translateY(3px);
   box-shadow: inset 0 -3px 0 var(--pink-darker);
 }
 
 .pink {
   background-color: var(--pink-medium);
   border-color: var(--pink-medium-dark);
   box-shadow: inset 0 -6px 0 var(--pink-medium-dark);
 }
 
 .dark-pink {
   background-color: var(--pink-medium-dark);
   border-color: var(--pink-dark);
   box-shadow: inset 0 -6px 0 var(--pink-dark);
 }
 
 .controls {
   display: flex;
   justify-content: center;
   align-items: center;
   gap: 1rem;
   flex-wrap: wrap;
 }
 
 .controls .pixel-btn {
   display: flex;
   align-items: center;
   gap: 0.5rem;
   padding: 0.75rem 1.25rem;
   flex: 1;
   justify-content: center;
   min-width: 120px;
 }
 
 .btn-icon {
   font-size: 1.5rem;
 }
 
 .mobile-controls {
   display: none;
   flex-direction: column;
   align-items: center;
   margin-top: 2rem;
 }
 
 .mobile-control-pad {
   display: grid;
   grid-template-columns: 1fr 1fr 1fr;
   grid-template-rows: 1fr 1fr 1fr;
   width: 150px;
   height: 150px;
   background-color: #4a3138; /* Darker pink control pad */
   border-radius: 12px;
   padding: 1rem;
   border: 4px solid var(--pink-medium-dark);
 }
 
 .mobile-control-pad .mobile-btn {
   background-color: var(--pink-medium);
   color: #fff;
   font-size: 1.2rem;
   display: flex;
   justify-content: center;
   align-items: center;
   padding: 0;
   border-radius: 4px;
   margin: 2px;
   box-shadow: inset 0 -4px 0 var(--pink-medium-dark);
   transition: transform 0.1s;
 }
 
 .mobile-control-pad .mobile-btn:active {
   transform: translateY(2px);
   box-shadow: inset 0 -2px 0 var(--pink-medium-dark);
 }
 
 .up-btn { grid-area: 1 / 2 / 2 / 3; }
 .left-btn { grid-area: 2 / 1 / 3 / 2; }
 .right-btn { grid-area: 2 / 3 / 3 / 4; }
 .down-btn { grid-area: 3 / 2 / 4 / 3; }
 
 /*
  * * * --- Settings Panel ---
  * * */
 .settings-panel {
   background-color: #382229; /* Darker pink settings background */
   padding: 1rem;
   border-radius: 8px;
   border: 2px solid var(--text-color);
   margin-top: 1rem;
   position: relative;
   overflow: hidden;
   height: 0;
   transition: height 0.3s ease;
 }
 
 .settings-panel.open {
   height: 200px;
   padding: 1.5rem;
 }
 
 .settings-panel h3 {
   margin-top: 0;
   font-size: 1.2rem;
   color: var(--pink-medium-light);
 }
 
 .setting-item {
   display: flex;
   justify-content: space-between;
   align-items: center;
   margin-bottom: 1rem;
   font-size: 0.9rem;
   color: var(--pink-light);
 }
 
 .setting-select,
 .setting-checkbox {
   font-family: var(--pixel-font);
   background-color: #5e3540; /* Darker pink select/checkbox */
   border: 2px solid #885361;
   color: var(--text-color);
   padding: 0.5rem;
   border-radius: 4px;
 }
 
 .setting-checkbox {
   width: 20px;
   height: 20px;
   accent-color: var(--pink-accent);
 }
 
 #toggleSettings {
   position: absolute;
   bottom: 10px;
   right: 10px;
   padding: 0.5rem 1rem;
   font-size: 0.8rem;
 }
 
 /*
  * * * --- Footer ---
  * * */
 .game-footer {
   margin-top: 1rem;
   font-size: 0.8rem;
   color: #e1bee7; /* Lighter pink for footer text */
 }
 
 .game-footer p {
   font-family: Arial, sans-serif;
   font-size: 0.8rem;
   color: #f48fb1; /* Medium light pink for paragraph */
 }
 
 .game-footer span {
   color: var(--pink-accent);
 }
 
 /*
  * * * --- Responsive Design ---
  * * */
 @media (max-width: 600px) {
   #game-container {
     padding: 1rem;
   }
 
   .game-header h1 {
     font-size: 1.5rem;
   }
 
   .info-btn {
     font-size: 1.5rem;
   }
 
   .score-container {
     flex-direction: column;
     gap: 0.5rem;
     padding: 0.5rem;
   }
 
   .score-divider {
     display: none;
   }
 
   .canvas-container {
     width: 300px;
     height: 300px;
   }
 
   #gameCanvas {
     width: 300px;
     height: 300px;
   }
 
   .controls {
     display: none;
   }
 
   .mobile-controls {
     display: flex;
   }
 
   .pixel-btn {
     font-size: 0.8rem;
     padding: 0.8rem 1rem;
   }
 }